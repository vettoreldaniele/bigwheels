package(default_visibility = ["//visibility:public"])

cc_library(
    name = "cpu_features",
    srcs = glob(["src/*.c", "src/*.inl"], exclude = ["src/hwcaps.c"]),
    copts = [
        "-DSTACK_LINE_READER_BUFFER_SIZE=1024",
    ],
    hdrs = [
        "include/cpu_features_macros.h",
        "include/cpu_features_cache_info.h",
        "include/cpuinfo_x86.h",
        "include/internal/cpuid_x86.h",
        "include/internal/bit_utils.h",
        "include/internal/filesystem.h",
        "include/internal/stack_line_reader.h",
        "include/internal/string_view.h",
    ],
    includes = [
        "include",
    ],
)
